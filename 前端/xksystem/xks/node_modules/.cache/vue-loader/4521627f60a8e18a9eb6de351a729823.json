{"remainingRequest":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/src/components/Calendar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/src/components/Calendar.vue","mtime":1592296837074},{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczp7CiAgICB0b2tlbjp7CiAgICAgIHR5cGU6U3RyaW5nLAogICAgICBkZWZhdWx0OiIiCiAgICB9LAogICAgc2lkOnsKICAgICAgdHlwZTpTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IiIKICAgIH0KICB9LAogIGRhdGE6ICgpID0+ICh7CiAgICBoZWFkZXJzOiBbCiAgICAgIHsKICAgICAgICB0ZXh0OiAi5Lq65pWwIiwKICAgICAgICBhbGlnbjogInN0YXJ0IiwKICAgICAgICB2YWx1ZTogInBudW0iCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0ZXh0OiAi6K++56iLIiwKICAgICAgICB2YWx1ZTogImNvdXJzZSIKICAgICAgfSwKICAgICAgewogICAgICAgIHRleHQ6ICLmlZnluIgiLAogICAgICAgIHZhbHVlOiAidGVhY2hlciIKICAgICAgfSwKICAgICAgewogICAgICAgIHRleHQ6ICLkuIror77ml7bpl7QiLAogICAgICAgIHZhbHVlOiAidGltZSIKICAgICAgfSwKICAgICAgewogICAgICAgIHRleHQ6ICLlnLDngrkiLAogICAgICAgIHZhbHVlOiAicGxhY2UiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0ZXh0OiAi5a2m5YiGIiwKICAgICAgICB2YWx1ZTogInNjb3JlIgogICAgICB9LAogICAgICB7CiAgICAgICAgdGV4dDogIuihjOS4uiIsCiAgICAgICAgdmFsdWU6ICJhY3Rpb24iLAogICAgICAgIHNvcnRhYmxlOiBmYWxzZQogICAgICB9CiAgICBdLAogICAgY291cnNlczogW10sCiAgICBzdW1fc2NvcmU6IiIKICB9KSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRfY2hvb3NlX2NvdXJzZXMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGRlbGV0ZV9pdGVtKGl0ZW0pIHsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmNvdXJzZXMuaW5kZXhPZihpdGVtKTsKICAgICAgaWYgKGNvbmZpcm0oIuehruWumuimgemAgOivvj8iKSkgewogICAgICAgIHRoaXMuJGh0dHAoewogICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICB1cmw6ICIvYXBpL3N0dWRlbnQvc3R1ZGVudHMvY2FuY2VsX2Nob29zZV9jb3Vyc2UvIiwKICAgICAgICAgIGRhdGE6ewogICAgICAgICAgICAgIG9jaWQ6cGFyc2VJbnQoaXRlbS5vY2lkKSwKICAgICAgICAgIH0sCiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICJBdXRob3JpemF0aW9uIjogdGhpcy50b2tlbgogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy5jb3Vyc2VzLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSk7CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGdldF9jaG9vc2VfY291cnNlcygpIHsKICAgICAgaWYgKHRoaXMuc2lkID09IG51bGwpIHJldHVybjsKICAgICAgdGhpcy4kaHR0cCh7CiAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICB1cmw6ICIvYXBpL3N0dWRlbnQvZ2V0X2Nob3Nlbl9jb3Vyc2VzLyIsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIkF1dGhvcml6YXRpb24iOiB0aGlzLnRva2VuCiAgICAgICAgfSwKICAgICAgfSkKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgbGV0IHN1bT0wOwogICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCByZXMuZGF0YS5sZW5ndGg7IGsrKykgewogICAgICAgICAgICB2YXIgcG4gPSByZXMuZGF0YVtrXS5vY2lkLmNob29zZW51bSArICIvIiArIHJlcy5kYXRhW2tdLm9jaWQubWF4bnVtOwogICAgICAgICAgICB2YXIgYyA9IHJlcy5kYXRhW2tdLm9jaWQuY2lkLmNuYW1lICsgIiAgIiArIHJlcy5kYXRhW2tdLm9jaWQuY2lkLmNpZDsKICAgICAgICAgICAgdmFyIHQgPSByZXMuZGF0YVtrXS5vY2lkLnRpZC50bmFtZSArICIgICIgKyByZXMuZGF0YVtrXS5vY2lkLnRpZC50aWQ7CiAgICAgICAgICAgIHZhciB4bmFtZT1yZXMuZGF0YVtrXS5vY2lkLnhpZC54bmFtZTsKICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuY291cnNlcywgaywgewogICAgICAgICAgICAgIHBudW06IHBuLAogICAgICAgICAgICAgIGNvdXJzZTogYywKICAgICAgICAgICAgICB0ZWFjaGVyOiB0LAogICAgICAgICAgICAgIHRpbWU6IHJlcy5kYXRhW2tdLm9jaWQudGltZSwKICAgICAgICAgICAgICBwbGFjZTogIlsiK3huYW1lICsgIl0gIiArIHJlcy5kYXRhW2tdLm9jaWQucGxhY2UsCiAgICAgICAgICAgICAgc2NvcmU6IHJlcy5kYXRhW2tdLm9jaWQuY2lkLnNjb3JlLAogICAgICAgICAgICAgIGNob3Nlbjp0cnVlLAogICAgICAgICAgICAgIG9jaWQ6cmVzLmRhdGFba10ub2NpZC5pZCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHN1bSs9cGFyc2VJbnQocmVzLmRhdGFba10ub2NpZC5jaWQuc2NvcmUpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5zdW1fc2NvcmU9c3VtOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlKTsKICAgICAgICB9KTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Calendar.vue"],"names":[],"mappings":";;;;;;;;;;;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Calendar.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"score-title\">总学分: {{sum_score}}</div>\n    <v-data-table :headers=\"headers\" :items=\"courses\" :items-per-page=\"10\">\n      <template v-slot:item.action=\"{ item }\">\n        <v-btn @click=\"delete_item(item)\" color=\"primary\">退课</v-btn>\n      </template>\n    </v-data-table>\n  </div>\n</template>\n\n<script>\nexport default {\n  props:{\n    token:{\n      type:String,\n      default:\"\"\n    },\n    sid:{\n      type:String,\n      default:\"\"\n    }\n  },\n  data: () => ({\n    headers: [\n      {\n        text: \"人数\",\n        align: \"start\",\n        value: \"pnum\"\n      },\n      {\n        text: \"课程\",\n        value: \"course\"\n      },\n      {\n        text: \"教师\",\n        value: \"teacher\"\n      },\n      {\n        text: \"上课时间\",\n        value: \"time\"\n      },\n      {\n        text: \"地点\",\n        value: \"place\"\n      },\n      {\n        text: \"学分\",\n        value: \"score\"\n      },\n      {\n        text: \"行为\",\n        value: \"action\",\n        sortable: false\n      }\n    ],\n    courses: [],\n    sum_score:\"\"\n  }),\n  created() {\n    this.get_choose_courses();\n  },\n  methods: {\n    delete_item(item) {\n      const index = this.courses.indexOf(item);\n      if (confirm(\"确定要退课?\")) {\n        this.$http({\n          method: \"POST\",\n          url: \"/api/student/students/cancel_choose_course/\",\n          data:{\n              ocid:parseInt(item.ocid),\n          },\n          headers: {\n            \"Authorization\": this.token\n          },\n        })\n          .then(res => {\n            if (res.status == 200) {\n              this.courses.splice(index, 1);\n            }\n          })\n          .catch(error => {\n            console.log(error.response);\n          });\n      }\n    },\n    get_choose_courses() {\n      if (this.sid == null) return;\n      this.$http({\n        method: \"get\",\n        url: \"/api/student/get_chosen_courses/\",\n        headers: {\n          \"Authorization\": this.token\n        },\n      })\n        .then(res => {\n          let sum=0;\n          for (var k = 0; k < res.data.length; k++) {\n            var pn = res.data[k].ocid.choosenum + \"/\" + res.data[k].ocid.maxnum;\n            var c = res.data[k].ocid.cid.cname + \"  \" + res.data[k].ocid.cid.cid;\n            var t = res.data[k].ocid.tid.tname + \"  \" + res.data[k].ocid.tid.tid;\n            var xname=res.data[k].ocid.xid.xname;\n            this.$set(this.courses, k, {\n              pnum: pn,\n              course: c,\n              teacher: t,\n              time: res.data[k].ocid.time,\n              place: \"[\"+xname + \"] \" + res.data[k].ocid.place,\n              score: res.data[k].ocid.cid.score,\n              chosen:true,\n              ocid:res.data[k].ocid.id,\n            });\n            sum+=parseInt(res.data[k].ocid.cid.score);\n          }\n          this.sum_score=sum;\n        })\n        .catch(error => {\n          console.log(error.response);\n        });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.score-title{\n  font-size: 14px;\n  margin-bottom: 20px;\n  margin-left: 14px;\n  color: rgba(0, 0, 0, 0.8);\n}\n</style>\n"]}]}