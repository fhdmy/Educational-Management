{"remainingRequest":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/src/components/Login.vue","mtime":1592123301855},{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiAoKSA9PiAoewogICAgYWNjb3VudDogIiIsCiAgICBwd2Q6ICIiLAogICAgYWNjb3VudF9mYWlsZWQ6IGZhbHNlLAogICAgeTogInRvcCIsCiAgICB0aW1lb3V0OiAyMDAwLAogICAgdXNlcl90eXBlX2FycmF5Olsn5a2m55SfJywn6ICB5biIJywn566h55CG5ZGYJ10sCiAgICB1c2VyX3R5cGU6IuWtpueUnyIKICB9KSwKICBjcmVhdGVkKCkgewogICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oInNpZCIpIT1udWxsICYmIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzcGFzc3dvcmQiKSE9bnVsbCl7CiAgICAgIHRoaXMuYWNjb3VudD1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2lkIik7CiAgICAgIHRoaXMucHdkPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzcGFzc3dvcmQiKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luKCkgewogICAgICB0aGlzLiRodHRwKHsKICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgIHVybDogIi9zdHVkZW50L2xvZ2luLz9zaWQ9IiArIHRoaXMuYWNjb3VudCArICImc3Bhc3N3b3JkPSIgKyB0aGlzLnB3ZAogICAgICB9KQogICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAvL+eZu+W9leaIkOWKnwogICAgICAgICAgaWYgKHJlcy5kYXRhKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJzaWQiLHRoaXMuYWNjb3VudCk7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJzcGFzc3dvcmQiLHRoaXMucHdkKTsKICAgICAgICAgICAgdGhpcy5jbGVhcklucHV0KCk7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoImxvZ2luIiwgdHJ1ZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmFjY291bnRfZmFpbGVkID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgY2hhbmdlX3VzZXJfdHlwZShlKXsKICAgICAgdGhpcy51c2VyX3R5cGU9ZTsKICAgIH0sCiAgICBjYW5jZWwoKSB7CiAgICAgIHRoaXMuY2xlYXJJbnB1dCgpOwogICAgICB0aGlzLiRlbWl0KCJjYW5jZWwiKTsKICAgIH0sCiAgICBjbGVhcklucHV0KCl7CiAgICAgIHRoaXMuYWNjb3VudD0iIjsKICAgICAgdGhpcy5wd2Q9IiI7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-container>\n    <v-snackbar v-model=\"account_failed\" multi-line=\"multi-line\" :top=\"y === 'top'\" :timeout=\"timeout\">\n      账号或密码错误！\n      <v-btn color=\"red\" text @click=\"account_failed = false\">关闭</v-btn>\n    </v-snackbar>\n    <v-card class=\"elevation-12\">\n      <v-toolbar color=\"indigo\" dark flat>\n        <v-toolbar-title>选课系统</v-toolbar-title>\n        <v-spacer/>\n      </v-toolbar>\n      <v-card-text>\n        <v-form>\n          <v-text-field label=\"账号\" name=\"account\" type=\"number\" v-model=\"account\"/>\n          <v-text-field id=\"password\" label=\"密码\" name=\"password\" type=\"password\" v-model=\"pwd\"/>\n          <v-select\n            :items=\"user_type_array\"\n            label=\"用户类型\"\n            :value=\"user_type\"\n            @change=\"change_user_type($event)\"\n          ></v-select>\n        </v-form>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer/>\n        <v-btn color=\"indigo\" style=\"color:white;margin-right:20px;\" @click=\"cancel()\">取消</v-btn>\n        <v-btn color=\"indigo\" style=\"color:white;\" @click=\"login()\">登录</v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  data: () => ({\n    account: \"\",\n    pwd: \"\",\n    account_failed: false,\n    y: \"top\",\n    timeout: 2000,\n    user_type_array:['学生','老师','管理员'],\n    user_type:\"学生\"\n  }),\n  created() {\n    if(localStorage.getItem(\"sid\")!=null && localStorage.getItem(\"spassword\")!=null){\n      this.account=localStorage.getItem(\"sid\");\n      this.pwd=localStorage.getItem(\"spassword\");\n    }\n  },\n  methods: {\n    login() {\n      this.$http({\n        method: \"get\",\n        url: \"/student/login/?sid=\" + this.account + \"&spassword=\" + this.pwd\n      })\n        .then(res => {\n          //登录成功\n          if (res.data) {\n            localStorage.setItem(\"sid\",this.account);\n            localStorage.setItem(\"spassword\",this.pwd);\n            this.clearInput();\n            this.$emit(\"login\", true);\n          } else {\n            this.account_failed = true;\n          }\n        })\n        .catch(error => {\n          console.log(error.response);\n        });\n    },\n    change_user_type(e){\n      this.user_type=e;\n    },\n    cancel() {\n      this.clearInput();\n      this.$emit(\"cancel\");\n    },\n    clearInput(){\n      this.account=\"\";\n      this.pwd=\"\";\n    }\n  }\n};\n</script>"]}]}