{"remainingRequest":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/babel-loader/lib/index.js!/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/src/components/Login.vue","mtime":1592143580789},{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jiang/Desktop/数据库/第二学期/选课系统/前端/xksystem/xks/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY2NvdW50OiAiIiwKICAgICAgcHdkOiAiIiwKICAgICAgYWNjb3VudF9mYWlsZWQ6IGZhbHNlLAogICAgICB5OiAidG9wIiwKICAgICAgdGltZW91dDogMjAwMCwKICAgICAgdXNlcl90eXBlX2FycmF5OiBbIuWtpueUnyIsICLogIHluIgiLCAi566h55CG5ZGYIl0sCiAgICAgIHVzZXJfdHlwZTogIuWtpueUnyIKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJpZCIpICE9IG51bGwgJiYgbG9jYWxTdG9yYWdlLmdldEl0ZW0oInBhc3N3b3JkIikgIT0gbnVsbCkgewogICAgICB0aGlzLmFjY291bnQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiaWQiKTsKICAgICAgdGhpcy5wd2QgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgicGFzc3dvcmQiKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnVzZXJfdHlwZSA9PSAi5a2m55SfIikgewogICAgICAgIHRoaXMuJGh0dHAoewogICAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgICB1cmw6ICIvYXBpL3N0dWRlbnQvc3R1ZGVudHMvbG9naW4vIiwKICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgc2lkOiB0aGlzLmFjY291bnQsCiAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLkJhc2U2NC5lbmNvZGUodGhpcy5wd2QpCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAvL+eZu+W9leaIkOWKnwogICAgICAgICAgaWYgKHJlcy5kYXRhKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpZCIsIF90aGlzLmFjY291bnQpOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgicGFzc3dvcmQiLCBfdGhpcy5wd2QpOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCByZXMuZGF0YS50b2tlbik7CgogICAgICAgICAgICBfdGhpcy5jbGVhcklucHV0KCk7CgogICAgICAgICAgICBfdGhpcy4kZW1pdCgibG9naW4iLCByZXMuZGF0YS50b2tlbik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5hY2NvdW50X2ZhaWxlZCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy51c2VyX3R5cGUgPT0gIuiAgeW4iCIpIHsKICAgICAgICB0aGlzLiRodHRwKHsKICAgICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgICAgdXJsOiAiL2FwaS90ZWFjaGVyL3RlYWNoZXJzL2xvZ2luLyIsCiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIHRpZDogdGhpcy5hY2NvdW50LAogICAgICAgICAgICBwYXNzd29yZDogdGhpcy5CYXNlNjQuZW5jb2RlKHRoaXMucHdkKQogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgLy/nmbvlvZXmiJDlip8KICAgICAgICAgIGlmIChyZXMuZGF0YSkgewogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWQiLCBfdGhpcy5hY2NvdW50KTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInBhc3N3b3JkIiwgX3RoaXMucHdkKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgcmVzLmRhdGEudG9rZW4pOwoKICAgICAgICAgICAgX3RoaXMuY2xlYXJJbnB1dCgpOwoKICAgICAgICAgICAgX3RoaXMuJGVtaXQoImxvZ2luIiwgcmVzLmRhdGEudG9rZW4pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMuYWNjb3VudF9mYWlsZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHRoaXMudXNlcl90eXBlID09ICLnrqHnkIblkZgiKSB7CiAgICAgICAgdGhpcy4kaHR0cCh7CiAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICAgIHVybDogIi9hcGkvc3lzYWRtaW4vc3lzdGVtYWRtaW5zL2xvZ2luLyIsCiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIGFkbWluaWQ6IHRoaXMuYWNjb3VudCwKICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuQmFzZTY0LmVuY29kZSh0aGlzLnB3ZCkKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIC8v55m75b2V5oiQ5YqfCiAgICAgICAgICBpZiAocmVzLmRhdGEpIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImlkIiwgX3RoaXMuYWNjb3VudCk7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJwYXNzd29yZCIsIF90aGlzLnB3ZCk7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0b2tlbiIsIHJlcy5kYXRhLnRva2VuKTsKCiAgICAgICAgICAgIF90aGlzLmNsZWFySW5wdXQoKTsKCiAgICAgICAgICAgIF90aGlzLiRlbWl0KCJsb2dpbiIsIHJlcy5kYXRhLnRva2VuKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLmFjY291bnRfZmFpbGVkID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGNoYW5nZV91c2VyX3R5cGU6IGZ1bmN0aW9uIGNoYW5nZV91c2VyX3R5cGUoZSkgewogICAgICB0aGlzLnVzZXJfdHlwZSA9IGU7CiAgICB9LAogICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIHRoaXMuY2xlYXJJbnB1dCgpOwogICAgICB0aGlzLiRlbWl0KCJjYW5jZWwiKTsKICAgIH0sCiAgICBjbGVhcklucHV0OiBmdW5jdGlvbiBjbGVhcklucHV0KCkgewogICAgICB0aGlzLmFjY291bnQgPSAiIjsKICAgICAgdGhpcy5wd2QgPSAiIjsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-container>\n    <v-snackbar\n      v-model=\"account_failed\"\n      multi-line=\"multi-line\"\n      :top=\"y === 'top'\"\n      :timeout=\"timeout\"\n    >\n      账号或密码错误！\n      <v-btn color=\"red\" text @click=\"account_failed = false\">关闭</v-btn>\n    </v-snackbar>\n    <v-card class=\"elevation-12\">\n      <v-toolbar color=\"indigo\" dark flat>\n        <v-toolbar-title>选课系统</v-toolbar-title>\n        <v-spacer/>\n      </v-toolbar>\n      <v-card-text>\n        <v-form>\n          <v-text-field label=\"账号\" name=\"account\" type=\"number\" v-model=\"account\"/>\n          <v-text-field id=\"password\" label=\"密码\" name=\"password\" type=\"password\" v-model=\"pwd\"/>\n          <v-select\n            :items=\"user_type_array\"\n            label=\"用户类型\"\n            :value=\"user_type\"\n            @change=\"change_user_type($event)\"\n          ></v-select>\n        </v-form>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer/>\n        <v-btn color=\"indigo\" style=\"color:white;margin-right:20px;\" @click=\"cancel()\">取消</v-btn>\n        <v-btn color=\"indigo\" style=\"color:white;\" @click=\"login()\">登录</v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  data: () => ({\n    account: \"\",\n    pwd: \"\",\n    account_failed: false,\n    y: \"top\",\n    timeout: 2000,\n    user_type_array: [\"学生\", \"老师\", \"管理员\"],\n    user_type: \"学生\"\n  }),\n  created() {\n    if (\n      localStorage.getItem(\"id\") != null &&\n      localStorage.getItem(\"password\") != null\n    ) {\n      this.account = localStorage.getItem(\"id\");\n      this.pwd = localStorage.getItem(\"password\");\n    }\n  },\n  methods: {\n    login() {\n      if (this.user_type == \"学生\") {\n        this.$http({\n          method: \"post\",\n          url: \"/api/student/students/login/\",\n          data: {\n            sid: this.account,\n            password: this.Base64.encode(this.pwd)\n          }\n        })\n          .then(res => {\n            //登录成功\n            if (res.data) {\n              localStorage.setItem(\"id\", this.account);\n              localStorage.setItem(\"password\", this.pwd);\n              localStorage.setItem(\"token\", res.data.token);\n              this.clearInput();\n              this.$emit(\"login\", res.data.token);\n            } else {\n              this.account_failed = true;\n            }\n          })\n          .catch(error => {\n            console.log(error.response);\n          });\n      }\n      else if(this.user_type == \"老师\"){\n        this.$http({\n          method: \"post\",\n          url: \"/api/teacher/teachers/login/\",\n          data: {\n            tid: this.account,\n            password: this.Base64.encode(this.pwd)\n          }\n        })\n          .then(res => {\n            //登录成功\n            if (res.data) {\n              localStorage.setItem(\"id\", this.account);\n              localStorage.setItem(\"password\", this.pwd);\n              localStorage.setItem(\"token\", res.data.token);\n              this.clearInput();\n              this.$emit(\"login\", res.data.token);\n            } else {\n              this.account_failed = true;\n            }\n          })\n          .catch(error => {\n            console.log(error.response);\n          });\n      }\n      else if(this.user_type == \"管理员\"){\n        this.$http({\n          method: \"post\",\n          url: \"/api/sysadmin/systemadmins/login/\",\n          data: {\n            adminid: this.account,\n            password: this.Base64.encode(this.pwd)\n          }\n        })\n          .then(res => {\n            //登录成功\n            if (res.data) {\n              localStorage.setItem(\"id\", this.account);\n              localStorage.setItem(\"password\", this.pwd);\n              localStorage.setItem(\"token\", res.data.token);\n              this.clearInput();\n              this.$emit(\"login\", res.data.token);\n            } else {\n              this.account_failed = true;\n            }\n          })\n          .catch(error => {\n            console.log(error.response);\n          });\n      }\n    },\n    change_user_type(e) {\n      this.user_type = e;\n    },\n    cancel() {\n      this.clearInput();\n      this.$emit(\"cancel\");\n    },\n    clearInput() {\n      this.account = \"\";\n      this.pwd = \"\";\n    }\n  }\n};\n</script>"],"sourceRoot":"src/components"}]}